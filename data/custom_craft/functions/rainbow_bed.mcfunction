#pour clear le résultat/ to clear the result if there's nothing
execute at @s[scores={craftID=1819}] if block ~ ~-49 ~ barrel{Items:[{tag:{CustomModelData:2,display:{Name:'{"text":""}'}},Slot:14b,id:"minecraft:light_gray_stained_glass_pane"}]} run function custom_crafting_table:reduce_input

#pour détecter les items en entrée et mettre le bon score/ detect the correct ingredients to assign the correct score
execute at @s if block ~ ~-49 ~ barrel{Items:[{Slot:1b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:2b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:3b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:10b,id:"minecraft:oak_planks"},{Slot:11b,id:"minecraft:oak_planks"},{Slot:12b,id:"minecraft:oak_planks"},{Slot:19b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:20b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:21b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}}]} run scoreboard players set @s craftID 1819
execute at @s if block ~ ~-49 ~ barrel{Items:[{Slot:1b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:2b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:3b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:10b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:11b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:12b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:19b,id:"minecraft:oak_planks"},{Slot:20b,id:"minecraft:oak_planks"},{Slot:21b,id:"minecraft:oak_planks"}]} run scoreboard players set @s craftID 1819

#on place le bon item en sortie/ correct output item
execute at @s[scores={craftID=1819}] run item replace block ~ ~-49 ~ container.14 with minecraft:armor_stand{CustomModelData:1819,display:{Name:'{"translate":"ms.item:rainbow_bed","italic":false}'},EntityTag:{Invisible:1b,CustomName:'{"text": "rainbow_bed"}'}}

#on tue l'item si l'établi est détruit/we kill the item if we destroy the crafting table
execute at @s[scores={craftID=1819}] positioned ~ ~-49 ~ run kill @e[type=item,distance=..1,limit=1,sort=nearest,nbt={Item:{tag:{display:{Name:'{"translate":"ms.item:rainbow_bed","italic":false}'}}}}]

#on vérifie la zone d'input pour remettre le score à 0/ verify the ingredient to reset the score to 0
execute at @s[scores={craftID=1819}] unless block ~ ~-49 ~ barrel{Items:[{Slot:1b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:2b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:3b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:10b,id:"minecraft:oak_planks"},{Slot:11b,id:"minecraft:oak_planks"},{Slot:12b,id:"minecraft:oak_planks"},{Slot:19b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:20b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:21b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}}]} unless block ~ ~-49 ~ barrel{Items:[{Slot:1b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:2b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:3b,id:"minecraft:light_gray_stained_glass_pane",tag:{CustomModelData:2,display:{Name:'{"text":""}'}}},{Slot:10b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:11b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:12b,id:"minecraft:bat_spawn_egg",tag:{EntityTag: {NoAI: 1b}, CustomModelData: 1819, display: {Name: '{"translate":"ms.item:rainbow_wool","italic":false}'}}},{Slot:19b,id:"minecraft:oak_planks"},{Slot:20b,id:"minecraft:oak_planks"},{Slot:21b,id:"minecraft:oak_planks"}]} run scoreboard players set @s craftID 0